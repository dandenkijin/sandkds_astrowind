---
import { UI } from 'astrowind:config';

// TODO: This code is temporary
---

<script is:inline>
  // Initialize theme from localStorage or system preference
  function initTheme() {
    const root = document.documentElement;
    const savedTheme = localStorage.theme;
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    
    // Apply theme based on saved preference or system preference
    if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
      root.classList.add('dark');
    } else {
      root.classList.remove('dark');
    }
    
    // Update any theme toggle icons
    const themeToggles = document.querySelectorAll('[aria-label="Toggle between Dark and Light mode"] svg');
    themeToggles.forEach(icon => {
      icon.setAttribute('name', root.classList.contains('dark') ? 'tabler:sun' : 'tabler:moon');
    });
  }
  
  // Initialize on page load
  document.addEventListener('DOMContentLoaded', initTheme);
  
  // Listen for theme changes from other components
  window.addEventListener('theme:changed', (e) => {
    const root = document.documentElement;
    const theme = e.detail?.theme;
    
    if (theme === 'dark') {
      root.classList.add('dark');
    } else {
      root.classList.remove('dark');
    }
    
    // Update any theme toggle icons
    const themeToggles = document.querySelectorAll('[aria-label="Toggle between Dark and Light mode"] svg');
    themeToggles.forEach(icon => {
      icon.setAttribute('name', theme === 'dark' ? 'tabler:sun' : 'tabler:moon');
    });
  });
</script>
